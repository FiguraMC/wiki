<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-tutorials/Pings">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Pings | Figura Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wiki.figuramc.org/tutorials/Pings"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Pings | Figura Wiki"><meta data-rh="true" name="description" content="With normal mods, there is comunication between the Minecraft Server and it&#x27;s clients which allows everything to stay in sync."><meta data-rh="true" property="og:description" content="With normal mods, there is comunication between the Minecraft Server and it&#x27;s clients which allows everything to stay in sync."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://wiki.figuramc.org/tutorials/Pings"><link data-rh="true" rel="alternate" href="https://wiki.figuramc.org/tutorials/Pings" hreflang="en"><link data-rh="true" rel="alternate" href="https://wiki.figuramc.org/tutorials/Pings" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.40a36e22.css">
<link rel="preload" href="/assets/js/runtime~main.4579f423.js" as="script">
<link rel="preload" href="/assets/js/main.6cd8f470.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Figura Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Figura Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Figura Wiki</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Figura</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/start-here">Start Here</a><button aria-label="Toggle the collapsible sidebar category &#x27;Start Here&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/category/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/ActionWheel">ActionWheel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/Animations">Animations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/Avatar Metadata">Avatar Metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/Custom-Items">Custom-Items</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/Emissive Textures">Emissive Textures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/How-To-Read-Documentation">How-To-Read-Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/Keybinds">Keybinds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/ModelPart Indexing">ModelPart Indexing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/Particles">Particles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/tutorials/Pings">Pings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/Sounds">Sounds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/Tables">Tables</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/globals">Globals</a><button aria-label="Toggle the collapsible sidebar category &#x27;Globals&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/enums">Enums</a><button aria-label="Toggle the collapsible sidebar category &#x27;Enums&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/category/tutorials"><span itemprop="name">Tutorials</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Pings</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Pings</h1></header><p>With normal mods, there is comunication between the Minecraft Server and it&#x27;s clients which allows everything to stay in sync. <br>
Figura is completely client-side. It will never comunicate with the Minecraft Server you are connected to. Figura does not have a server-side component, meaning nothing will happen if you put the mod on a server.<br></p><p>What does this mean for you, the user? It means that certain functionality that only your client has access to will not be synced with other players.<br>
Some examples:</p><ul><li>Keybinds<br><ul><li>If the Minecraft Server tracked every single keystroke, it would be a major security issue. The exact keystrokes are never sent, only the result of those keystrokes.</li></ul></li><li>Action Wheel<br><ul><li>The Action Wheel is a feature added by Figura. Remember how I said that Figura never comunicates with the Minecraft Server? It should be obvious why the Action Wheel isnt synced.</li></ul></li><li>HostAPI<br><ul><li>The HostAPI exclusivly contains variables that only you, the owner of the avatar and the owner of the machine running Minecraft, has access to. All functions contained within are vanilla variables that are not synced with the Minecraft Server. They are wrapped in a nice, explicit package stating that they are never synced. This is unlike the PlayerAPI, which you can assume is always synced (to some extent (I&#x27;m looking at you <code>isGrounded</code>))</li></ul></li></ul><p>So how can we sync information with other players if we cannot do it through the Minecraft Server? The answer is Pings.<br></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="general-pings">General Pings<a href="#general-pings" class="hash-link" aria-label="Direct link to General Pings" title="Direct link to General Pings">​</a></h2><p>Pings utilize Figura&#x27;s Backend to sync information with other clients.<br>
Pings are functions that when called, triggers all other clients to call the same function for their instance of your avatar.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ping-rate-limiting">Ping Rate Limiting<a href="#ping-rate-limiting" class="hash-link" aria-label="Direct link to Ping Rate Limiting" title="Direct link to Ping Rate Limiting">​</a></h3><p>The backend restricts you on how much data you can send over a period of time.<br>
The developer given limits are:</p><ul><li>1024 bytes per second</li><li>32 pings per second</li></ul><p>If either of these are reached, the backend will ignore any comunication from you for some amount of time.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pingable-values">Pingable Values<a href="#pingable-values" class="hash-link" aria-label="Direct link to Pingable Values" title="Direct link to Pingable Values">​</a></h3><p>Pings can send most primitive types and some userdata types.<br>
All pingable types use a single byte to represent the type of data that is being sent. This byte is not included in the listed byte totals.</p><ul><li><code>nil</code> - 0 Bytes - if a type that is not supported is used as a parameter, it will be replaced with <code>nil</code>.</li><li><code>boolean</code> - 0 Bytes</li><li><code>integear</code> - 1-4 Bytes - <code>integears</code> only take up as many bytes as it needs. - <code>integears</code> are signed. For example, to only use a single byte the value must be between -128 and 127.</li><li><code>double</code> - 8 Bytes - If the number has a decimal at all, or is outside the range of a 4 byte <code>integear</code>, it will be sent as a <code>double</code>.</li><li><code>string</code> - 2+n Bytes - <code>strings</code> will always use 2 bytes to store the length. - Ascii characters will be a single byte each. - UTF-8 characters will be multiple bytes per character. - The absolute maximum size of string you can send is <code>65535</code> characters. If a larger string is sent, it will be truncated.</li><li><code>table</code> - Too Many Bytes - Every key and value is send as data, resulting in high byte costs. - It is recommended to never send a table over pings.</li><li><code>VectorN</code> - 1+8\*N Bytes - Vectors have a single byte that stores the size of the Vector. - Vectors are always assumed to store <code>doubles</code>. If you have a Vector of integears, I recommend sending them as 3 seperate arguments instead.</li><li><code>MatrixN</code> - 2+8\*W\*H Bytes - Matrices store both the width and height of the matrix, then every value as a <code>double</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ping">Ping<a href="#ping" class="hash-link" aria-label="Direct link to Ping" title="Direct link to Ping">​</a></h3><p>Below is an example ping.</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">function pings.pingName(a)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;Ping&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;.&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;Data Recieved:&quot;, a)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;.&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;Pong&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It accepts a single variable, which it will print to the chat as an example.</p><p>To call it, just call it like any other lua function.</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pings.pingName(&quot;This is a string wooooooooooooooooo&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When you as the host call the ping, the function will execute for all other clients, regardless of their current state.</p><p>Do note that if a non-host client reaches a line where a ping gets called, it is completely ignored. No data is sent to the backend, and the contents of the ping will not be executed.</p><p>Ping functions can be passed into functions that expect a function as a parameter, such as Action <code>onToggle</code>. </p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">actionVariable:onToggle(pings.pingName)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Remember that we are passing the function itself as a variable. The below would be passing the <em>return result</em> of the ping function, which is nigh guarenteed to be <code>nil</code> as Pings <em>should never</em> return a value.</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">--do not do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">actionVariable:onToggle(pings.pingName())</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-pings">Advanced Pings<a href="#advanced-pings" class="hash-link" aria-label="Direct link to Advanced Pings" title="Direct link to Advanced Pings">​</a></h2><p>Situational techniques that may be handy, depending on the use case.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ping-on-init">Ping on Init<a href="#ping-on-init" class="hash-link" aria-label="Direct link to Ping on Init" title="Direct link to Ping on Init">​</a></h3><p>Calling a ping function when the script is first loaded is a horrible idea. The ping will only ever execute for other clients when you, the host, load the avatar. Not only that, it may never be executed on other clients, as they might not have your avatar loaded by the time you broadcast the ping.</p><p>How do we get around this? Well, when you assign a function to an index in the <code>pings</code> table, the Lua Function gets replaced with a Java Function. This happens because of metatables, specifically the <code>__newindex</code> metamethod. Functions cannot be modified, so if we store the function before assing it to the <code>pings</code> table, we can use it like a regular function, and use the same code as a ping function.</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">local function doThing(state)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    models.modelA:setVisible(state)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    models.modelB:setVisible(not state)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pings.doThing = doThing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- doThing and pings.doThing are 2 completely seperate values at this point, as the pings table has replaced the index at pings.doThing with a Java Function that wraps the doThing Lua Function.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- &lt;code&gt;doThing==pings.doThing&lt;/code&gt; will return &lt;code&gt;false&lt;/code&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(doThing, pings.doThing, doThing==pings.doThing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">local keybindState = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- I call the local doThing instead of pings.doThing, as pings.doThing is a function that invokes network code.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- This ensures that the default state is set correctly. If this was a ping function, both models will be visible for other clients until you press the keybind.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">doThing(keybindState)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">local keyA = keybinds:newKeybind(&quot;KeybindName&quot;, &quot;key.keyboard.k&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function keyA.press()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    keybindState = not keybindState</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- We still need to call the ping function in the keybind.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pings.doThing(keybindState)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The alternative is to reiterate the <code>models.modelA:setVisible(state) models.modelB:setVisible(not state)</code> part of the ping.<br>
For larger pings it will be combersome to rewrite code that is already defined, which is why this technique is useful.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="byte-array">Byte Array<a href="#byte-array" class="hash-link" aria-label="Direct link to Byte Array" title="Direct link to Byte Array">​</a></h3><p>There are some situations where you will want to send a large amount of raw bytes, and you need to do it efficiently. The most efficient way is to send a string.</p><p>Asside from the 2 constant bytes for the length, a string will always be 1 byte per ascii character (UTF-8 characters are multiple ascii characters, interpreted as a single character). This makes it very consistent in terms of bytes, making it easy to predict and avoid being rate limited. </p><p>Below is a basic conversion of a byte array to a string, ready to be pinged and converted back into a byte array on the client&#x27;s end.</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">function pings.recieveData(str)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local byteArray = table.pack(string.byte(str))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    printTable(byteArray)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">local packet=[]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for i=1,20 do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    table.insert(packet, math.random(0,255))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">local keyA = keybinds:newKeybind(&quot;KeybindName&quot;, &quot;key.keyboard.k&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function keyA.press()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    local packedString = string.char(table.unpack(packet))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pings.recieveData(packedString)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/figuramc/wiki/tree/main/docs/tutorials/Pings.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/tutorials/Particles"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Particles</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tutorials/Sounds"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Sounds</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#general-pings" class="table-of-contents__link toc-highlight">General Pings</a><ul><li><a href="#ping-rate-limiting" class="table-of-contents__link toc-highlight">Ping Rate Limiting</a></li><li><a href="#pingable-values" class="table-of-contents__link toc-highlight">Pingable Values</a></li><li><a href="#ping" class="table-of-contents__link toc-highlight">Ping</a></li></ul></li><li><a href="#advanced-pings" class="table-of-contents__link toc-highlight">Advanced Pings</a><ul><li><a href="#ping-on-init" class="table-of-contents__link toc-highlight">Ping on Init</a></li><li><a href="#byte-array" class="table-of-contents__link toc-highlight">Byte Array</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 FiguraMC</div></div></div></footer></div>
<script src="/assets/js/runtime~main.4579f423.js"></script>
<script src="/assets/js/main.6cd8f470.js"></script>
</body>
</html>